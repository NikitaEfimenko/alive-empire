{"ast":null,"code":"import _classCallCheck from \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/efimenko/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/alive-empire-game/client/src/Game.js\";\nimport React, { createRef, Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Button, Container } from 'reactstrap';\nimport io from 'socket.io-client';\nimport { Route, withRouter } from 'react-router-dom';\nimport { Howl, Howler } from 'howler';\nimport './Game.css';\nimport { Chat, Statistics, GameBar } from './modules';\nimport { BlurContainer } from './components';\nimport { InitModal } from './containers';\nimport { initSocket as _initSocket, sendLoginInfo as _sendLoginInfo, login } from './actions';\nimport Engine from './engine';\n\nvar playSounds = function playSounds() {\n  var sounds = ['music/Polyphia G.O.A.T. (Official Music Video).mp3', 'music/Polyphia – O.D..mp3', 'music/Polyphia - Crush.mp3'];\n  var sound = new Howl({\n    src: sounds,\n    autoplay: true,\n    volume: 0.9\n  });\n}; //playSounds()\n//rules for bonus \n\n\nvar alive1 = function alive1(x) {\n  return x >= 1;\n};\n\nvar rules1 = function rules1(prev, res, alive) {\n  if (alive(prev)) {\n    if (res == 2 || res == 3) {\n      return prev + 2;\n    } else {\n      return res - prev < 0;\n    }\n  } else {\n    return res == 3;\n  }\n};\n\nvar alive3 = function alive3(x) {\n  return x == 1;\n};\n\nvar rules3 = function rules3(prev, res, alive) {\n  if (alive(prev)) {\n    if (res == 2 || res == 3) {\n      return 1;\n    } else {\n      return 0;\n    }\n  } else {\n    return res == 3;\n  }\n};\n\nvar alive2 = function alive2(x) {\n  return x >= 1;\n};\n\nvar rules2 = function rules2(prev, res, alive) {\n  if (alive(prev)) {\n    if (res == 1 || res == 4) {\n      return prev + 1;\n    } else {\n      return res - prev < 0;\n    }\n  } else {\n    if (res == 4) {\n      return 2;\n    } else {\n      return 0;\n    }\n  }\n};\n\nvar iconUrls = ['./icon1.png', './icon2.png', './icon3.png'];\nvar iconObj = {\n  blue: './icon1.png',\n  red: './icon2.png',\n  green: './icon3.png'\n};\nvar shadow = {\n  'blue': {\n    r: 100,\n    g: 100,\n    b: 255\n  },\n  'red': {\n    r: 255,\n    g: 100,\n    b: 100\n  },\n  'green': {\n    r: 5,\n    g: 100,\n    b: 5\n  }\n};\nvar urls = ['./hero1.png', './hero.png', './hero2.png', './waterbear.png'];\nvar images = urls.map(function (url) {\n  return new Image();\n});\nimages.forEach(function (img, id) {\n  return img.src = urls[id];\n});\nvar rules = [{\n  name: 'blue',\n  alive: alive3,\n  rules: rules3,\n  image: images[0],\n  shadow: shadow[0]\n}, {\n  name: 'red',\n  alive: alive3,\n  rules: rules3,\n  image: images[1],\n  shadow: shadow[1]\n}, {\n  name: 'green',\n  alive: alive3,\n  rules: rules3,\n  image: images[2],\n  shadow: shadow[2]\n}];\nvar configs = {\n  urls: iconUrls,\n  descriptions: {\n    blue: 'супер быстрые',\n    red: 'супер сильные',\n    green: \"супер плодовитые\"\n  }\n};\n\nvar Game =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Game, _Component);\n\n  function Game(props) {\n    var _this;\n\n    _classCallCheck(this, Game);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Game).call(this, props));\n    _this.state = {\n      statistics: []\n    };\n\n    _this.init = function () {\n      _this.resize();\n\n      _this.engine = Engine(_this._canvas.current);\n      rules.forEach(_this.engine.addConfig);\n\n      _this.engine.setLoot({\n        img: images[3]\n      });\n    };\n\n    _this.resize = function () {\n      var parent = _this._canvas.current.parentElement;\n      _this._canvas.current.width = parent.clientWidth;\n      _this._canvas.current.height = parent.clientHeight;\n    };\n\n    _this.login = function () {\n      _this.change();\n\n      _this.props.Login();\n\n      _this.props.sendLoginInfo(_this.socket, _this.props.config);\n    };\n\n    _this.toggle = function () {\n      var isOn = false;\n      var id = null;\n      return function () {\n        isOn = !isOn;\n\n        if (isOn) {\n          id = setTimeout(function () {\n            _this.engine.render();\n\n            _this.setState({\n              statistics: _this.engine.getStatistics()\n            });\n          }, 0);\n        } else {\n          clearInterval(id);\n        }\n      };\n    };\n\n    _this.change = function () {\n      console.log(_this.props.race);\n\n      _this.engine.use(_this.props.race);\n    };\n\n    _this._canvas = createRef();\n    _this.engine = null;\n    return _this;\n  }\n\n  _createClass(Game, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.init();\n      this.socket = io();\n      this.props.initSocket(this.socket);\n      window.addEventListener('resize', this.init);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var statistics = this.state.statistics;\n      var color = shadow[this.props.race];\n      var stats = [{\n        race: 'blue',\n        url: iconUrls[0],\n        score: 26\n      }, {\n        race: 'red',\n        url: iconUrls[1],\n        score: 6\n      }, {\n        race: 'green',\n        url: iconUrls[2],\n        score: 120\n      }];\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(BlurContainer, {\n        kernel: 14,\n        is: !this.props.isLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"h-100 w-100 background tools\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"canvas\", {\n        ref: this._canvas,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(Statistics, {\n        list: stats,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }), React.createElement(Button, {\n        color: \"danger\",\n        onClick: this.toggle(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \" on \"), React.createElement(Container, {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(GameBar, {\n        color: \"rgb(\".concat(color.r, \",\").concat(color.g, \",\").concat(color.b),\n        value: 100,\n        url: iconObj[this.props.race],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return Game;\n}(Component);\n/*\n<Route exact path='/' render={ () => {\n            return <InitModal isLogin={this.props.isLogin} login={this.login} configs={configs} />\n        }}/>\n*/\n//Вернуть и очень много работы с engine\n//  <Statistics color={`rgb(${color.r},${color.g},${color.b}`}  value={statistics[this.props.race]} list={statistics} urls = {iconUrls}/>\n// <Button  color='danger' onClick={this.toggle()}> on </Button>\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isLogin: state.isLogin,\n    race: state.race,\n    config: {\n      race: state.race,\n      name: state.name\n    }\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    initSocket: function initSocket(socket) {\n      return dispatch(_initSocket(socket));\n    },\n    Login: function Login() {\n      return dispatch(login());\n    },\n    sendLoginInfo: function sendLoginInfo(socket, config) {\n      return dispatch(_sendLoginInfo(socket, config));\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Game));","map":{"version":3,"sources":["/home/efimenko/Рабочий стол/alive-empire-game/client/src/Game.js"],"names":["React","createRef","Component","Fragment","connect","Button","Container","io","Route","withRouter","Howl","Howler","Chat","Statistics","GameBar","BlurContainer","InitModal","initSocket","sendLoginInfo","login","Engine","playSounds","sounds","sound","src","autoplay","volume","alive1","x","rules1","prev","res","alive","alive3","rules3","alive2","rules2","iconUrls","iconObj","blue","red","green","shadow","r","g","b","urls","images","map","url","Image","forEach","img","id","rules","name","image","configs","descriptions","Game","props","state","statistics","init","resize","engine","_canvas","current","addConfig","setLoot","parent","parentElement","width","clientWidth","height","clientHeight","change","Login","socket","config","toggle","isOn","setTimeout","render","setState","getStatistics","clearInterval","console","log","race","use","window","addEventListener","color","stats","score","isLogin","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { createRef, Component, Fragment } from 'react';\nimport { connect } from 'react-redux'\nimport { Button, Container } from 'reactstrap'\nimport io from 'socket.io-client'\nimport { Route, withRouter } from 'react-router-dom'\nimport {Howl, Howler} from 'howler'\nimport './Game.css'\nimport {\n  Chat,\n  Statistics,\n  GameBar\n} from './modules'\nimport { \n  BlurContainer,\n} from './components'\n\nimport {\n  InitModal\n} from './containers'\n\nimport { \n  initSocket,\n  sendLoginInfo,\n  login\n} from './actions'\n\nimport Engine from './engine'\n\n\nconst playSounds = () => {\n  const sounds = [\n    'music/Polyphia G.O.A.T. (Official Music Video).mp3',\n    'music/Polyphia – O.D..mp3',\n    'music/Polyphia - Crush.mp3'\n  ]\n  const sound = new Howl({\n    src:sounds,\n    autoplay: true,\n    volume: 0.9,\n  });\n}\n\n//playSounds()\n\n//rules for bonus \n  const alive1 = x => x >= 1\n\n  const rules1 = (prev, res, alive) => {\n    if (alive(prev)){\n      if (res ==  2 || res == 3 ){\n        return prev + 2\n      }\n      else {\n        return (res - prev < 0)\n      }\n    }\n    else{\n        return (res == 3)\n    }\n  }\n\n  const alive3 = x => x == 1\n\n  const rules3 = (prev, res, alive) => {\n    if (alive(prev)){\n      if (res == 2 || res == 3 ){\n        return 1\n      }\n      else {\n        return 0\n      }\n    }\n    else{\n        return (res == 3)\n    }\n  }\n\n  const alive2 = x => x >= 1\n\n  const rules2 = (prev, res, alive) => {\n    if (alive(prev)){\n      if (res == 1 || res == 4 ){\n        return prev + 1\n      }\n      else {\n        return (res - prev < 0)\n      }\n    }\n    else{\n        if (res == 4){\n        return 2\n      }\n      else {\n        return 0\n      }\n    }\n  }\n\n\n\nconst iconUrls = ['./icon1.png','./icon2.png','./icon3.png']\nconst iconObj = {blue:'./icon1.png',red:'./icon2.png',green:'./icon3.png'}\nconst shadow = {'blue':{r:100,g:100,b:255},'red':{r:255,g:100,b:100},'green':{r:5,g:100,b:5}}\nconst urls = ['./hero1.png', './hero.png', './hero2.png', './waterbear.png']\nconst images = urls.map( url => new Image())\nimages.forEach((img, id) => img.src = urls[id])\n\nconst rules = [{name:'blue',alive:alive3, rules:rules3,image: images[0],shadow:shadow[0]}, {name:'red',alive:alive3, rules:rules3, image:images[1],shadow:shadow[1]}, {name:'green',alive:alive3, rules:rules3, image:images[2],shadow:shadow[2]}]\n\nconst configs = {\n  urls: iconUrls,\n  descriptions: {blue:'супер быстрые',red:'супер сильные',green:\"супер плодовитые\"}\n}\n\n\nclass Game extends Component {\nstate = {\n  statistics: [],\n}\nconstructor(props){\n   super(props)\n   this._canvas = createRef()\n   this.engine = null\n}\ncomponentDidMount(){\n  this.init()\n  this.socket = io()\n  this.props.initSocket(this.socket)\n  window.addEventListener('resize', this.init)\n}\ninit = () => {\n  this.resize()\n  this.engine = Engine(this._canvas.current)\n  rules.forEach(this.engine.addConfig)\n  this.engine.setLoot({\n    img:images[3]\n  })\n}\n\nresize = () => {\n  const parent = this._canvas.current.parentElement;\n  this._canvas.current.width = parent.clientWidth\n  this._canvas.current.height = parent.clientHeight\n}\n\nlogin = () => {\n  this.change()\n  this.props.Login()\n  this.props.sendLoginInfo(this.socket, this.props.config)\n}\n\ntoggle = () => {\n  let isOn = false;\n  let id = null\n  return () => {\n    isOn = !isOn\n    if (isOn) {\n      id = setTimeout(()=>{\n        this.engine.render()\n        this.setState({\n          statistics:this.engine.getStatistics()\n        })\n      }, 0)\n    }\n    else{\n      clearInterval(id)\n    }\n  }\n}\n\nchange = () => {\n  console.log(this.props.race)\n  this.engine.use(this.props.race)\n}\n\n  render(){\n    const { statistics } = this.state\n    const  color = shadow[this.props.race]\n    const stats = [\n      {race:'blue', url: iconUrls[0], score: 26},\n      {race:'red', url: iconUrls[1], score: 6},\n      {race:'green', url: iconUrls[2], score: 120}\n    ]\n    return (\n      <Fragment>\n        \n        <BlurContainer  kernel={14} is={!this.props.isLogin}>\n          <div  className='h-100 w-100 background tools'>\n            <canvas  ref={this._canvas}/>\n            <Statistics list={stats}/>\n            <Button  color='danger' onClick={this.toggle()}> on </Button>\n            <Container className='d-flex'>\n              <GameBar color={`rgb(${color.r},${color.g},${color.b}`}  value={100}  url={iconObj[this.props.race]} />\n            </Container>\n          </div>\n        </BlurContainer>\n      </Fragment>\n    )\n  }\n}\n\n\n/*\n<Route exact path='/' render={ () => {\n            return <InitModal isLogin={this.props.isLogin} login={this.login} configs={configs} />\n        }}/>\n*/\n//Вернуть и очень много работы с engine\n\n\n//  <Statistics color={`rgb(${color.r},${color.g},${color.b}`}  value={statistics[this.props.race]} list={statistics} urls = {iconUrls}/>\n// <Button  color='danger' onClick={this.toggle()}> on </Button>\n\nconst mapStateToProps = state => {\n  return {\n    isLogin: state.isLogin,\n    race: state.race,\n    config: {\n      race: state.race,\n      name: state.name\n    }\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    initSocket: (socket) => dispatch(initSocket(socket)),\n    Login: () => dispatch(login()),\n    sendLoginInfo: (socket, config) => dispatch(sendLoginInfo(socket, config)),\n  }\n}\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Game))\n\n"]},"metadata":{},"sourceType":"module"}