(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,n){},104:function(e,t,n){},106:function(e,t,n){},108:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},114:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(14),o=n(9),s=n(10),i=n(12),l=n(11),u=n(13),m=n(6),p=n(3),f=n(52),g=n.n(f),d=n(120),h=n(122),E=n(19),v=(n(95),n(7)),b=(n(97),function(e){var t=e.message;return r.a.createElement(p.a,{className:"d-flex"},r.a.createElement(p.a,{className:"icon"},r.a.createElement("img",{width:"30px",height:"30px",src:t.url}),r.a.createElement("p",null," ","".concat(t.name)," ")),r.a.createElement(p.a,{className:"message"},r.a.createElement("p",null," ","".concat(t.text)," ")))});(function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={value:""},n.handle=function(e){13==e.keyCode&&(n.setState({value:e.target.value}),e.target.value="")},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(p.a,{className:"chat w-100"},r.a.createElement(p.a,{className:"textarea"},this.props.messages.map(function(t,n){return r.a.createElement(b,{key:n,message:Object(v.a)({},t,{text:e.state.value})})})),r.a.createElement(p.a,{className:"input"},r.a.createElement(p.b,{onKeyDown:this.handle,onChange:this.handleOnChange})))}}]),t}(a.Component)).defaultProps={messages:[]};n(99),n(101);var y=function(){new E.Howl({src:["music/1.mp3"],autoplay:!0,volume:.9})},O=function(){new E.Howl({src:["music/2.mp3"],autoplay:!0,volume:.9})},j=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handler=function(){O(),n.props.history.push(n.props.to),n.props.close()},n.keyClose=function(e){e.keyCode==n.props.closeKey&&n.handler()},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.children;return this.props.appear&&r.a.createElement("div",{onKeyDown:this.keyClose,className:"modal-layer"},r.a.createElement(p.a,{className:"inner-modal-layer"},r.a.createElement("p",{className:"modal-cross",onClick:this.handler},"X"),e))}}]),t}(a.Component),w=Object(h.a)(j),k=(n(104),function(e){return r.a.createElement("div",{className:"blur-container",style:e.is?(t=e.kernel,{filter:"blur(".concat(t,"px)")}):{}},e.children);var t});k.defaultProps={kernel:3};n(106);var _=Object(m.b)(null,function(e){return{selectName:function(t){return e(function(e){return{type:"SELECT_NAME",payload:e}}(t))}}})(function(e){var t=e.selectName;return r.a.createElement(p.a,null,r.a.createElement("p",{className:"text-center"}," \u0411\u0430\u043a\u0442\u0435\u0440\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u043e\u0437\u0432\u0438\u0449\u0435: "),r.a.createElement(p.b,{onKeyDown:function(e){13==e.keyCode&&(t(e.target.value),e.target.value="")},placeholder:"\u0418\u043c\u044f"}))}),N=(n(108),function(e){var t,n=e.text,a=e.placement;return r.a.createElement("div",{className:"my_message ".concat((t=a,"bottom"===t?"my_message-bottom":"my_message-top"))},r.a.createElement("p",{className:"discription-text"},n))}),S=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={is:!1},n.close=function(){return n.setState({is:!1})},n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.children!==this.props.children&&this.setState({is:!0})}},{key:"componentDidUpdate",value:function(e,t){this.state.is&&(clearTimeout(this.id),this.id=setTimeout(this.close,2e3))}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,this.state.is&&this.props.children)}}]),t}(a.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.placement;return r.a.createElement(S,null,r.a.createElement(N,{text:t,placement:n}))}}]),t}(a.PureComponent),x=(n(110),Object(m.b)(function(e){return{socket:e.socket}},function(e){return{postMessage:function(t){return e(function(e){return{type:"POST_MESSAGE",payload:e}}(t))},sendMessage:function(t,n){return e(function(e,t){return function(n){e.emit("send-message",t)}}(t,n))}}})(function(e){var t=e.postMessage,n=e.socket,a=e.sendMessage;return r.a.createElement(p.b,{className:"w-50",placeholder:"\u0427\u0410\u0422",onKeyDown:function(e){13==e.keyCode&&(t(e.target.value),a(n,e.target.value),e.target.value="")}})})),L=n(119),T=function(e){var t=e.url,n=e.to;return r.a.createElement(L.a,{to:n},r.a.createElement("img",{width:"50px",height:"50px",src:t}))},M=function(e){var t=e.score,n=e.url,a=e.message;return r.a.createElement(p.a,{onClick:y,className:"statistic-item"},r.a.createElement(T,{url:n,to:"/"}),r.a.createElement("p",null," ",t," "),r.a.createElement(C,{placement:"bottom",text:a}))},A=Object(m.b)(function(e){return{messages:e.messages}})(function(e){e.value,e.color;var t=e.list,n=e.messages;return r.a.createElement(a.Fragment,null,r.a.createElement("ul",{className:"statistics statistics-list"},t.map(function(e,t){return r.a.createElement("li",{key:t}," ",r.a.createElement(M,{message:n[e.race],score:e.score,url:e.url})," ")})))}),P=(n(112),function(e){var t=e.url,n=e.onClick,a=e.selected?"heroes_selected":"heroes";return r.a.createElement("i",{onClick:n,className:a},r.a.createElement("img",{width:"100px",height:"100px",src:t}))}),I=["blue","red","green"],D=Object(m.b)(function(e){return{race:e.race}},function(e){return{selectRace:function(t){return e(function(e){return{type:"SELECT_RACE",payload:e}}(t))}}})(function(e){var t=function(t){return function(){y(),e.selectRace(I[t])}},n=e.configs,a=e.description,c=n.urls,o=n.descriptions;return r.a.createElement(p.a,{className:"class-selector"},r.a.createElement(p.a,{className:"class-selector__classes"},c.map(function(n,a){return r.a.createElement(P,{onClick:t(a),selected:I[a]===e.race,key:a,url:n})})),a&&r.a.createElement(p.a,{className:"class-selector__description"},r.a.createElement("p",{className:"discription-text"},o[e.race])))}),R=(n(114),function(e){var t=e.onClick,n=e.url,a=e.to;return r.a.createElement(L.a,{to:a},r.a.createElement("img",{width:"120px",height:"120px",onClick:t,className:"kok",src:n}))}),G=Object(m.b)(function(e){return{text:e.message}})(function(e){var t=e.url,n=e.text;return r.a.createElement(p.a,{fluid:!0,className:"game-bar_container"},r.a.createElement("div",{className:"game-bar-hero"},r.a.createElement(R,{onClick:y,url:t,to:"/"}),r.a.createElement(C,{placement:"top",text:n})),r.a.createElement(x,null))}),H=n(57),K=Object(m.b)(function(e){return{race:e.race}})(function(e){var t=e.isLogin,n=e.login,c=e.configs,o=Object(H.a)(e,["isLogin","login","configs"]);return r.a.createElement(w,{appear:!0,close:n,to:"/game",closeKey:13},!t&&r.a.createElement(a.Fragment,null,r.a.createElement("hr",null),r.a.createElement(_,null),r.a.createElement("hr",null)),r.a.createElement("p",{className:"text-center"},"\u0420\u0430\u0441\u0430: ",o.race," "),r.a.createElement("hr",null),r.a.createElement(D,{description:!0,configs:c}),r.a.createElement("hr",null))}),W={alive:function(e){return e>=1},rules:function(e){return 0},name:"init"},X=function(e){var t=Math.floor(e.width/80),n=Math.floor(e.height/60),a=1.7*Math.min(n,t),r=e.getContext("2d"),c=[],o=0,s="init",i=[],l=0,u=function(e){return e},m=function(e){c[e.name]=Object(v.a)({},e,{id:o++,count:0})},p=function(e){var t=c[e];t.alive,t.rules;s=e};m(W),p(s);var f=function(){var e=d,t=e.x,n=e.y;u(t,n)};e.addEventListener("mousemove",function(e){var a=h(e),r=a.x,c=a.y;d={x:Math.floor(r/t),y:Math.floor(c/n)},function(e,t){i=i.filter(function(n){return Math.abs(n.x-e)+Math.abs(n.y-t)>50})}(r,c)}),e.addEventListener("mousedown",function(t){f(),e.addEventListener("mousemove",f)}),e.addEventListener("mouseup",function(){e.removeEventListener("mousemove",f)});var g=[],d={},h=function(t){return{x:t.pageX-e.offsetLeft,y:t.pageY-e.offsetTop}},E=function(e,a){var o=g[e+80*a].race,s=c[o].image;s&&r.drawImage(s,e*t,a*n)},b=function(e,o){var s=g[e+80*o].race,i=c[s].shadow;i&&(r.beginPath(),r.fillStyle="rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",0.13)"),r.arc((e+.8)*t,(o+.8)*n,a,0,2*Math.PI),r.fill())};return{addConfig:m,use:function(e){p(e)},getStatistics:function(e){return c[e][o]},setLoot:function(e){e.img;e.size},getPower:function(){return l},initPower:function(e){return l=e},onMouse:function(e){return u=e},paint:function(){r.clearRect(0,0,e.width,e.height);for(var t=0;t<80;++t)for(var n=0;n<60;++n)g[t+80*n].alive?E(t,n):b(t,n)},set:function(e){g=e}}};new E.Howl({src:["music/Polyphia G.O.A.T. (Official Music Video).mp3","music/Polyphia \u2013 O.D..mp3","music/Polyphia - Crush.mp3"],autoplay:!0,volume:.9});var U=["./icon1.png","./icon2.png","./icon3.png"],z={blue:"./icon1.png",red:"./icon2.png",green:"./icon3.png"},F={blue:{r:100,g:100,b:255},red:{r:255,g:100,b:100},green:{r:5,g:100,b:5}},V=["./hero1.png","./hero.png","./hero2.png","./waterbear.png"],Y=V.map(function(e){return new Image});Y.forEach(function(e,t){return e.src=V[t]});var J=[{name:"blue",image:Y[0],shadow:F.blue},{name:"red",image:Y[1],shadow:F.red},{name:"green",image:Y[2],shadow:F.green}],B={urls:U,descriptions:{blue:"\u0441\u0443\u043f\u0435\u0440 \u0431\u044b\u0441\u0442\u0440\u044b\u0435",red:"\u0441\u0443\u043f\u0435\u0440 \u0441\u0438\u043b\u044c\u043d\u044b\u0435",green:"\u0441\u0443\u043f\u0435\u0440 \u043f\u043b\u043e\u0434\u043e\u0432\u0438\u0442\u044b\u0435"}},Z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={statistics:[]},n.init=function(){n.resize(),n.engine=X(n._canvas.current),J.forEach(n.engine.addConfig),n.change(),n.engine.onMouse(function(e,t){return n.props.sendMousePosition(n.socket,e,t)})},n.resize=function(){var e=n._canvas.current.parentElement;n._canvas.current.width=e.clientWidth,n._canvas.current.height=e.clientHeight},n.login=function(){n.change(),n.props.Login(),n.props.sendLoginInfo(n.socket,n.props.config)},n.change=function(){n.engine.use(n.props.race)},n._canvas=Object(a.createRef)(),n.engine=null,n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.init(),this.socket=g()(),this.props.initSocket(this.socket,this.engine),window.addEventListener("resize",this.init)}},{key:"render",value:function(){var e=this,t=(this.state.statistics,F[this.props.race]);return r.a.createElement(a.Fragment,null,r.a.createElement(d.a,{exact:!0,path:"/",render:function(){return r.a.createElement(K,{isLogin:e.props.isLogin,login:e.login,configs:B})}}),r.a.createElement(k,{kernel:14,is:!this.props.isLogin},r.a.createElement("div",{className:"h-100 w-100 background tools"},r.a.createElement("canvas",{ref:this._canvas}),r.a.createElement(A,{color:"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b),value:100,list:this.props.stats}),r.a.createElement(p.a,{className:"d-flex"},r.a.createElement(G,{url:z[this.props.race]})))))}}]),t}(a.Component),q=Object(h.a)(Object(m.b)(function(e){return{isLogin:e.isLogin,race:e.race,config:{race:e.race,name:e.name},stats:[{race:"blue",url:U[0],score:e.statistics[0]},{race:"red",url:U[1],score:e.statistics[1]},{race:"green",url:U[2],score:e.statistics[2]}]}},function(e){return{initSocket:function(t,n){return e(function(e,t){return function(n){e.on("new-players",function(e){n(function(e){return{type:"NEW_PLAYERS",payload:e}}(e))}),e.on("response-message",function(e){n(function(e){return{type:"SHOW_MESSAGE",payload:e}}(e))}),n(function(e){return{type:"ADD_SOCKET",payload:e}}(e)),e.on("render",function(e){t.set(e),t.paint()}),e.on("statistics",function(e){n(function(e){return{type:"SHOW_STATISTICS",payload:e}}(e))})}}(t,n))},Login:function(){return e({type:"LOGIN"})},sendMousePosition:function(t,n,a){return e(function(e,t,n){return function(a){var r={x:t,y:n};e.emit("send-mouse-position",r)}}(t,n,a))},sendLoginInfo:function(t,n){return e(function(e,t){return function(n){e.emit("send-login-info",t)}}(t,n))}}})(Z)),Q={race:"red",messages:{},message:"let's start",isLogin:!1,statistics:[0,0,0]},$=n(18),ee=n(56),te=n(121),ne=(n(116),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),ae=Object($.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_NAME":return Object(v.a)({},e,{name:t.payload});case"SHOW_STATISTICS":return Object(v.a)({},e,{statistics:t.payload});case"LOGIN":return Object(v.a)({},e,{isLogin:!0});case"LOGOUT":return Object(v.a)({},e,{isLogin:!1});case"SELECT_RACE":return Object(v.a)({},e,{race:t.payload});case"NEW_PLAYERS":return Object(v.a)({},e,{players:t.payload});case"SET_POPULATION_SIZE":return Object(v.a)({},e,{population:t.payload});case"POST_MESSAGE":return Object(v.a)({},e,{message:t.payload});case"ADD_SOCKET":return Object(v.a)({},e,{socket:t.payload});case"SHOW_MESSAGE":var n=t.payload,a=n.race,r=n.message,c=Object(v.a)({},e.messages);return c[a]=r,Object(v.a)({},e,{messages:c});default:return e}},Object($.c)(Object($.a)(ee.a),ne));ae.dispatch({type:"INIT"}),Object(c.render)(r.a.createElement(m.a,{store:ae},r.a.createElement(te.a,null,r.a.createElement(q,null))),document.getElementById("root"))},58:function(e,t,n){e.exports=n(118)},92:function(e,t){},95:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){}},[[58,2,1]]]);
//# sourceMappingURL=main.e2ad1c19.chunk.js.map